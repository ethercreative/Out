var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,a=!1,l=void 0;try{for(var d,r=e[Symbol.iterator]();!(i=(d=r.next()).done)&&(n.push(d.value),!t||n.length!==t);i=!0);}catch(e){a=!0,l=e}finally{try{!i&&r.return&&r.return()}finally{if(a)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),prevLoad=window.onload;window.onload=function(){prevLoad&&prevLoad();for(var e=document.getElementById("elementType"),t=document.querySelectorAll("[data-source-type]"),n={},i=0,a=t.length;i<a;++i){var l=t[i],d=l.dataset.sourceType,r=document.createComment(d),s=l;s.removeAttribute("style"),n[d]={comment:r,input:s},e.value!==d&&s.parentNode.replaceChild(r,s)}var u=n[e.value];e.addEventListener("change",function(e){u.input.parentNode.replaceChild(u.comment,u.input),(u=n[e.target.value]).comment.parentNode.replaceChild(u.input,u.comment)})};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=document.createElement(e),a=!0,l=!1,d=void 0;try{for(var r,s=Object.entries(t)[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var u=r.value,o=slicedToArray(u,2),c=o[0],h=o[1];h&&("function"!=typeof h?("style"===c&&(h=h.replace(/[\t\r\n]/g," ").trim()),i.setAttribute(c,h)):"ref"===c?h(i):i.addEventListener(c,h))}}catch(e){l=!0,d=e}finally{try{!a&&s.return&&s.return()}finally{if(l)throw d}}return Array.isArray(n)||(n=[n]),n.forEach(function(e){if(e)try{i.appendChild(e)}catch(t){i.appendChild(document.createTextNode(e))}}),i},f=function(e){return h("div",{class:"field"},[h("div",{class:"heading"},[h("label",{for:e.id},e.label),e.hasOwnProperty("instructions")?h("div",{class:"instructions"},h("p",{},e.instructions)):null]),h("div",{class:"input"},[h(e.tag,_extends({id:e.id},e.attr),e.children||null)])])};window.Out={fieldMap:{},fields:{},activeFieldId:null,modal:null,headingInput:null,twigInput:null,escapeInput:null,enabledInput:null,fieldSettings:null,init:function(e){var t=this;this.fieldMap=e,this.fieldSettings=document.getElementById("fieldSettings"),this.fields=JSON.parse(this.fieldSettings.value),Array.isArray(this.fields)&&(this.fields={});for(var n=document.getElementById("outFields").getElementsByTagName("button"),i=0,a=n.length;i<a;++i)n[i].addEventListener("click",this.edit.bind(this));this.modal=new Garnish.Modal(h("div",{class:"modal out--modal"},[h("div",{class:"body"},[f({label:"Enabled",id:"out_enabled",tag:"input",attr:{type:"checkbox",checked:!1,ref:function(e){t.enabledInput=e}}}),f({label:"Column Heading",id:"out_columnHeading",tag:"input",attr:{class:"text fullwidth",ref:function(e){t.headingInput=e}}}),f({label:"Twig",id:"out_twig",tag:"textarea",attr:{rows:5,class:"text fullwidth",ref:function(e){t.twigInput=e}},instructions:["Code to be executed in place of the fields output. You have access to the ",h("code",{},"element")," variable as well as all global & Craft variables."]}),f({label:"Escape Value",id:"out_escape",tag:"input",attr:{type:"checkbox",checked:!0,ref:function(e){t.escapeInput=e}},instructions:"If checked the output of the column will be escaped"})]),h("div",{class:"footer"},[h("div",{class:"buttons right"},[h("button",{class:"btn",click:this.cancel.bind(this)},"Cancel"),h("button",{class:"btn submit",click:this.update.bind(this)},"Update")])])]),{autoShow:!1})},edit:function(e){e.preventDefault(),this.setValues(e.target),this.modal.show()},setValues:function(e){var t=e.dataset.key;if(this.activeFieldId=t,this.fields.hasOwnProperty(t)){var n=this.fields[t];return this.enabledInput.checked=n.enabled,this.headingInput.value=n.heading,this.twigInput.value=n.twig,void(this.escapeInput.checked=n.escape)}var i=this.fieldMap[t];this.enabledInput.checked=!1,this.headingInput.value=i.name,this.twigInput.value="{{ element."+i.handle+" }}",this.escapeInput.checked=!0},update:function(){this.fields[this.activeFieldId]={enabled:this.enabledInput.checked,heading:this.headingInput.value,twig:this.twigInput.value,escape:this.escapeInput.checked},this.fieldSettings.value=JSON.stringify(this.fields),this.modal.hide()},cancel:function(){this.modal.hide()}};
//# sourceMappingURL=out.min.js.map