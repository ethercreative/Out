var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},slicedToArray=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,a=!1,l=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){a=!0,l=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw l}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),prevLoad=window.onload;window.onload=function(){prevLoad&&prevLoad();for(var t=document.getElementById("elementType"),e=document.querySelectorAll("[data-source-type]"),i={},n=0,a=e.length;n<a;++n){var l=e[n],r=l.dataset.sourceType,s=document.createComment(r),d=l;d.removeAttribute("style"),i[r]={comment:s,input:d},t.value!==r&&d.parentNode.replaceChild(s,d)}var o=i[t.value];t.addEventListener("change",function(t){o.input.parentNode.replaceChild(o.comment,o.input),(o=i[t.target.value]).comment.parentNode.replaceChild(o.input,o.comment)})};var h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=document.createElement(t),a=!0,l=!1,r=void 0;try{for(var s,d=Object.entries(e)[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var o=s.value,u=slicedToArray(o,2),c=u[0],h=u[1];h&&("function"!=typeof h?("style"===c&&(h=h.replace(/[\t\r\n]/g," ").trim()),n.setAttribute(c,h)):"ref"===c?h(n):n.addEventListener(c,h))}}catch(t){l=!0,r=t}finally{try{!a&&d.return&&d.return()}finally{if(l)throw r}}return Array.isArray(i)||(i=[i]),i.forEach(function(t){if(t)try{n.appendChild(t)}catch(e){n.appendChild(document.createTextNode(t))}}),n},f=function(t){return h("div",{class:"field"},[h("div",{class:"heading"},[h("label",{for:t.id},t.label),t.hasOwnProperty("instructions")?h("div",{class:"instructions"},h("p",{},t.instructions)):null]),h("div",{class:"input"},[h(t.tag,_extends({id:t.id},t.attr),t.children||null)])])};window.Out={fieldMap:{},fields:{},activeFieldId:null,modal:null,headingInput:null,twigInput:null,escapeInput:null,fieldSettings:null,init:function(t){var e=this;this.fieldMap=t,this.fieldSettings=document.getElementById("fieldSettings"),this.fields=JSON.parse(this.fieldSettings.value),this.modal=new Garnish.Modal(h("div",{class:"modal out--modal"},[h("div",{class:"body"},[f({label:"Column Heading",id:"out_columnHeading",tag:"input",attr:{class:"text fullwidth",ref:function(t){e.headingInput=t}}}),f({label:"Twig",id:"out_twig",tag:"textarea",attr:{rows:5,class:"text fullwidth",ref:function(t){e.twigInput=t}},instructions:["Code to be executed in place of the fields output. You have access to the ",h("code",{},"element")," variable as well as all global & Craft variables."]}),f({label:"Escape Value",id:"out_escape",tag:"input",attr:{type:"checkbox",checked:!0,ref:function(t){e.escapeInput=t}},instructions:"If checked the output of the column will be escaped"})]),h("div",{class:"footer"},[h("div",{class:"buttons right"},[h("button",{class:"btn",click:this.cancel.bind(this)},"Cancel"),h("button",{class:"btn submit",click:this.update.bind(this)},"Update")])])]),{autoShow:!1})},edit:function(t){this.setValues(t),this.modal.show()},setValues:function(t){var e=t.dataset.id;if(this.activeFieldId=e,this.fields.hasOwnProperty(e)){var i=this.fields[e];return this.headingInput.value=i.heading,this.twigInput.value=i.twig,void(this.escapeInput.checked=i.escape)}this.headingInput.value=t.textContent.trim(),this.twigInput.value="{{ element."+this.fieldMap[e]+" }}"},update:function(){this.fields[this.activeFieldId]={heading:this.headingInput.value,twig:this.twigInput.value,escape:this.escapeInput.checked},this.fieldSettings.value=JSON.stringify(this.fields),this.modal.hide()},cancel:function(){this.modal.hide()}};
//# sourceMappingURL=out.min.js.map